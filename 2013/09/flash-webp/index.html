<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="lt-ie10 lt-ie9"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="lt-ie10"> <![endif]-->
<!--[if gt IE 10]><!--><html lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="width=device-width" name="viewport">
    <link href="//fonts.googleapis.com" rel="dns-prefetch">
    <link href="//themes.googleusercontent.com" rel="dns-prefetch">
    <link href="//www.google-analytics.com" rel="dns-prefetch">
    
      <title>Flash + WebP &ndash; Aziz H K</title>
      <meta content="Flash + WebP" property="og:title">
      <meta content="Flash + WebP" name="twitter:title">
    
    <meta content="Aziz H K" property="og:site_name">
    
      <meta content="Leverage Google's WebP, An image format for the Web to speed up the loading time of your Flash Projects." name="description">
      <meta content="Leverage Google's WebP, An image format for the Web to speed up the loading time of your Flash Projects." property="og:description">
      <meta content="Leverage Google's WebP, An image format for the Web to speed up the loading time of your Flash Projects." name="twitter:description">
    
    <meta content="Aziz Khambati" name="author">
    <!--Credits (Copied From)
    Actual Author of theme: David Ensinger 
    <link href="https://plus.google.com/111951762509840042073/posts" rel="author">
    <meta content="@DavidEnsinger" name="twitter:site">
    <meta content="@DavidEnsinger" name="twitter:creator">
    -->
    <link href="/favicon.ico" rel="shortcut icon">
    <link href="http://azizhk.github.io/2013/09/flash-webp/" rel="canonical">
    
      <meta content="article" property="og:type">
    
    <meta content="summary" name="twitter:card">
    
      <meta content="http://azizhk.github.io/2013/09/flash-webp/" property="og:url">
      <meta content="http://azizhk.github.io/2013/09/flash-webp/" name="twitter:url">
    
    
      <meta content="2013-09-10T04:30:00+05:30" property="article:published_time">
      <meta content="http://azizhk.github.io/about/" property="article:author">
    
    
      <meta property="og:image" content="http://azizhk.github.io/assets/img/logo-high-resolution.png">
      <meta name="twitter:image:src" content="http://azizhk.github.io/assets/img/logo-high-resolution.png">
    
    
      
      <meta property="article:section" content="adobe flash">
      
    
    
      
      <meta property="article:tag" content="Flash">
      
      <meta property="article:tag" content="WebP">
      
    
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600" rel="stylesheet" type="text/css">
    
    
    <link href="../../../assets/css/styles.css" rel="stylesheet" type="text/css">
    
    <!--[if lt IE 9]>
      <script src="/assets/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body class="page-post">
    <div class="outer-container">
      <div class="inner-container">
        <!--[if lt IE 9]><div class="chromeframe">
          <p>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to Firefox (the best) or a  different browser</a></p>
        </div><![endif]-->
        <header class="site-header" role="banner">
          <a class="site-logo" href="/"><?xml version="1.0"?>
<svg width="112" height="118" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <symbol viewBox="-331.95 -74.35 654.8 142.172" id="Symbol_2">
  <g id="Layer_4_1_">
   <path d="m-331.950012,57.299999l11.899994,1.100002c4.867004,-1 14.899994,1.716999 30.100006,8.150002c54.966995,2.566994 106.966995,1.25 156,-3.950005c30.034004,-2.599998 54.133003,-6.299999 72.300003,-11.099998c18.132999,-4.799999 37.167,-7.799999 57.099999,-9v-12c-18.699999,0.1 -29.417,-1.382999 -32.149998,-4.450001l-12.800003,-58.399998l-8.149998,-3l6.099998,44.599998c4.900002,21.233 -3.049999,32.716991 -23.849998,34.450001c-73.199997,9.533001 -143.317001,13.5 -210.350021,11.899998c-10.299988,-0.899998 -15.733002,-6.982998 -16.299988,-18.25l8,-58.849998l-8,3.299999c-3.200012,21.333001 -12.016998,34.233002 -26.450012,38.700001l-3.449982,36.799999z" clip-rule="evenodd" fill-rule="evenodd"/>
  </g>
  <g id="Layer_3_1_">
   <path d="m66.300003,43.700001c-20.800003,-1.733002 -28.750004,-13.217001 -23.850002,-34.450001l6.099998,-44.599998l-8.149998,3l-12.800001,58.399998c-2.733,3.067001 -13.450001,4.550001 -32.150001,4.450001v12c19.933001,1.200001 38.966001,4.200001 57.099999,9c18.167004,4.799999 42.267002,8.5 72.299992,11.099998c49.033005,5.200005 101.033005,6.516998 156.000015,3.950005c15.199982,-6.433002 25.233002,-9.150002 30.100006,-8.150002l11.899994,-1.100002l-3.450012,-36.799999c-14.432983,-4.466999 -23.25,-17.367 -26.449982,-38.700001l-8,-3.299999l8,58.849998c-0.567017,11.267002 -6,17.350002 -16.300018,18.25c-67.03299,1.600002 -137.149994,-2.366997 -210.349991,-11.899998z" clip-rule="evenodd" fill-rule="evenodd"/>
  </g>
  <g id="Layer_2_2_">
   <path d="m-298.049988,-19.85l6.149994,-26.9c0.367004,-3.299999 2.700012,-5.617001 7,-6.950001c17.399994,-4.700001 34.182999,-8.482998 50.350006,-11.350002c39,-5.399994 77.382996,-8.333 115.150002,-8.799995c17.832993,0.966995 34.266998,3.632996 49.299995,8c4.099998,1.266998 7.033001,4.532997 8.799999,9.799999l5.800003,23.349998" stroke-miterlimit="3" stroke-linejoin="round" stroke-linecap="round" stroke="#000000" fill="none" clip-rule="evenodd" fill-rule="evenodd"/>
  </g>
  <g id="Layer_1_2_">
   <path d="m288.950012,-19.85l-6.149994,-26.9c-0.367004,-3.299999 -2.700012,-5.617001 -7,-6.950001c-17.399994,-4.700001 -34.183014,-8.482998 -50.350006,-11.350002c-39,-5.399994 -77.382996,-8.333 -115.150002,-8.799995c-17.833,0.966995 -34.266998,3.632996 -49.299999,8c-4.100002,1.266998 -7.033001,4.532997 -8.800003,9.799999l-5.800007,23.349998" stroke-miterlimit="3" stroke-linejoin="round" stroke-linecap="round" stroke="#000000" fill="none" clip-rule="evenodd" fill-rule="evenodd"/>
  </g>
 </symbol>
 <g>
  <title>Layer 1</title>
  <use fill="#2077b2" transform="matrix(0.17022, 0, 0, -0.17022, 60.7471, 15.6853)" y="-325.79586" x="-355.288049" height="142.172" width="654.8" xlink:href="#Symbol_2"/>
 </g>
</svg></a>
          <nav class="main-navigation" role="navigation">
            <h1 class="visuallyhidden">Menu</h1>
            <div class="visuallyhidden">
              <a href="#content" title="Skip to content">Skip to content</a>
            </div>
            <ul>
              <li>
                <a class="nav-home" href="../../../">Home</a>
              </li>
              <li>
                <a class="nav-about" href="../../../about/">About</a>
              </li>
            </ul>
          </nav>
        </header>
        <div class="primary" id="content" role="main">

<article class="post hentry">
  <header class="entry-header">
    <h1 class="entry-title">Flash + WebP</h1>
    <div class="entry-meta entry-meta-header">
      <span class="icon-calendar"></span>
      <time class="date updated" datetime="2013-09-10T04:30:00+05:30">September 10, 2013</time>
    </div>
  </header>
  <div class="entry-content">
    <blockquote><p>WebP is a new image format that provides lossless and lossy compression for images on the web. WebP lossless images are 26% smaller in size compared to PNGs. WebP lossy images are 25-34% smaller in size compared to JPEG images at equivalent SSIM index. WebP supports lossless transparency (also known as alpha channel) with just 22% additional bytes. Transparency is also supported with lossy compression and typically provides 3x smaller file sizes compared to PNG when lossy compression is acceptable for the red/green/blue color channels.</p>

<p><cite><a href="https://developers.google.com/speed/webp/">Google Developers</a></cite></p></blockquote>

<p>WebP is supported by a variety of tools. In addition, it is now natively supported in Google Chrome, the Google Chrome Frame plug-in for Internet Explorer, Opera 11.10 and Android Ice Cream Sandwich. But it still is not supported by Firefox, Internet Explorer and many others. So Web Developers still have to provide fallbacks for this format. Either they have to use <a href="http://libwebpjs.hohenlimburg.org/">LibWebPJS</a> or serve both web-p and jpg/png.</p>

<p>Luckily for Flash developers, who always have had no problems worrying about working across various platforms as that work is done by the Flash Player itself. There are multiple libraries which we can use.</p>

<ul>
    <li><a href="http://unitzeroone.com/blog/2011/11/20/webp-decoder-for-flash/" target="_blank">Webplib.swc by UnitZeroOne</a></li>
    <li><a href="http://www.etherdream.com/webp/" target="_blank">zjcqoo's Implementation</a></li>
    <li><a href="http://www.sineysoft.com/post/114" target="_blank">Sineysoft's Implementation</a></li>
</ul>


<p>Somehow UnitZeroOne&rsquo;s and zjcqoo&rsquo;s implementation gave me some problems. Probably I was using the latest version of the convertor and they were not. Also Sineysoft&rsquo;s version supported transparency, did not try that with the others. So I used Sineysoft&rsquo;s. Unfortunately his swc is very bulky, roughly 300 KB. So it would be of use if the difference between your jpg images and webp images is less than 300 KB.</p>

<p>You can see my work <a href="http://www.bits-oasis.org/2011/webp/">here</a>. Its an old, unused site for our college&rsquo;s cultural festival which I had built. The base site was ~4 MB while now its 2.1 MB. I have ported the panorama in the background only, nothing else.</p>

<h2>Code</h2>

<p>Download webpswc.swc from <a href="https://github.com/termvader/WebPDemo/blob/master/lib/webpswc.swc?raw=true">here</a>.</p>

<p>Get the FlashDevelop Project from <a href="https://github.com/termvader/WebPDemo" target="_blank">here</a>.</p>

<p>Or Just the code.</p>

<div class="highlight">
<pre><code>package 
{
    import sineysoft.WebpSwc;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.utils.ByteArray;
    
    public class Main extends Sprite 
    {
        [Embed(source = "WebPImage.webp", mimeType = "application/octet-stream")]
        private const WebPImageClass:Class;
        
        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }
        
        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;
            
            var bitmapData:BitmapData = WebpSwc.decode(new WebPImageClass() as ByteArray);
            var bitmap:Bitmap = new Bitmap(bitmapData);
            bitmap.scaleX = 0.5;
            bitmap.scaleY = 0.5;
            addChild(bitmap);
            // entry point
        }   
    }   
}</code></pre>
</div>


<p>You can also load the image at runtime, not having to embed it in the swf itself. I&rsquo;ll add code for that also, soon.</p>

  </div>
  
    <footer class="entry-meta entry-meta-footer">
      <span class="icon-tag"></span>
      <span class="entry-meta-icon">
        
          <a class="nav-link-tag" href="../../../tag/flash" rel="tag" title="See Posts Tagged with Flash">Flash</a>, 
        
          <a class="nav-link-tag" href="../../../tag/webp" rel="tag" title="See Posts Tagged with WebP">WebP</a>
        
      </span>
      
        <span class="icon-folder"></span>
        <span class="entry-meta-icon">
          
            <a class="nav-link-category" href="../../../categories/adobe-flash" rel="category" title="See Posts Categorized with Adobe flash">Adobe flash</a>
          
        </span>
      
    </footer>
  
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'azizhk';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
</article>
<nav class="post-navigation" role="navigation">
  <h1 class="visuallyhidden">Post navigation</h1>
  
    <div class="nav-previous">
      <a class="nav-previous-link" href="http://azizhk.github.io/2013/09/jquery-vibrate/" rel="prev"><span class="icon-arrow-down-left"></span>Jquery Vibrate</a>
    </div>
  
  
</nav>
        </div>
        <aside class="secondary vcard author" role="complementary">
          <img alt="Aziz H K" class="secondary-photo photo" src="../../../assets/img/azizhk.jpg">
          <p>Hi, I’m <strong class="fn">Aziz Khambati</strong>. Learn more <a href="/about/" class="url">about me</a>.</p>
          <p>Have a look around and please don’t hesitate to <a href="mailto:aziz.h.khambati@gmail.com" class="email">contact me</a> with any comments, questions, or just to say hello!</p>
          <p>Or if you wish to message me on <a href="https://www.facebook.com/termvader">Facebook</a>
        </aside>
      </div>
      <footer class="site-footer" role="contentinfo">
        <p>
          Website design by David Ensinger. Hosted on Github Pages with the help of Jekyll
        </p>
      </footer>
    </div>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-43045490-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>

